<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kafka Flow Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="header">
        <h1>Kafka <span>Flow Dashboard</span></h1>
        <div class="status">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Connecting...</span>
            <button class="clear-btn" onclick="clearMessages()">Clear Messages</button>
        </div>
    </div>

    <div class="container">
        <div class="flow-diagram">
            <div class="flow-step" id="step-truck-detected">
                <div class="flow-icon truck-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 3h15v13H1z" />
                        <path d="M16 8h4l3 3v5h-7V8z" />
                        <circle cx="5.5" cy="18.5" r="2.5" />
                        <circle cx="18.5" cy="18.5" r="2.5" />
                    </svg>
                </div>
                <div class="flow-content">
                    <div class="flow-name">Truck Detected</div>
                    <div class="flow-count" id="count-truck">0</div>
                </div>
            </div>
            <div class="flow-arrow">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12l7 7 7-7" />
                </svg>
            </div>

            <div class="flow-step" id="step-lp-results">
                <div class="flow-icon lp-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="16" rx="2" />
                        <path d="M7 8h10M7 12h10M7 16h10" />
                    </svg>
                </div>
                <div class="flow-content">
                    <div class="flow-name">License Plate</div>
                    <div class="flow-count" id="count-lp">0</div>
                </div>
            </div>
            <div class="flow-arrow">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12l7 7 7-7" />
                </svg>
            </div>

            <div class="flow-step" id="step-hz-results">
                <div class="flow-icon hz-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        <line x1="12" y1="9" x2="12" y2="13" />
                        <line x1="12" y1="17" x2="12.01" y2="17" />
                    </svg>
                </div>
                <div class="flow-content">
                    <div class="flow-name">Hazard Plate</div>
                    <div class="flow-count" id="count-hz">0</div>
                </div>
            </div>
            <div class="flow-arrow">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12l7 7 7-7" />
                </svg>
            </div>

            <div class="flow-step" id="step-decision">
                <div class="flow-icon decision-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        <path d="M9 12l2 2 4-4" />
                    </svg>
                </div>
                <div class="flow-content">
                    <div class="flow-name">Decision</div>
                    <div class="flow-count" id="count-decision">0</div>
                </div>
            </div>
        </div>

        <div class="messages-panel">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('single')">Single Flow</button>
                <button class="tab-btn" onclick="switchTab('all')">All Events</button>
            </div>

            <div class="messages-list" id="messagesList">
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                    </svg>
                    <p>Waiting for Kafka messages...</p>
                    <p style="font-size: 12px; margin-top: 10px;">Messages will appear here in real-time</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/dashboard.js"></script>
</body>

</html>